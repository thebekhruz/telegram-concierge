<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Oxbridge International School - Admissions</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <!-- App Header (shown on all screens except welcome) -->
    <div class="app-header" id="appHeader" style="display: none;">
        <button class="header-back-btn" id="headerBackBtn" onclick="goBack()">
            ←
        </button>
        <div class="header-title" id="headerTitle">Admissions</div>
        <button class="header-lang-btn" onclick="showLanguageSelection()" id="headerLangBtn">
            <span id="currentLangDisplay">EN</span>
        </button>
    </div>

    <div class="app-container">
        <!-- Welcome Screen -->
        <div class="screen active" id="welcomeScreen">
            <div class="welcome-content">
                <img src="/images/hero.jpg" alt="Oxbridge Campus" class="hero-image" onerror="this.style.display='none'">

                <div class="welcome-inner">
                    <div class="logo-container">
                        <img src="/images/oxbridge-logo.png" alt="Oxbridge" class="logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div class="logo-text" style="display: none;">OXBRIDGE</div>
                    </div>
                    <h1 class="welcome-title" data-i18n="welcome.title">Oxbridge International School</h1>
                    <p class="welcome-subtitle" data-i18n="welcome.subtitle">Admissions Assistant</p>
                    <p class="welcome-text" data-i18n="welcome.description">Plan your child's education at our Mirzo-Ulugbek and Yashnobod campuses for 2025–2026.</p>
                    <p class="welcome-instruction" data-i18n="welcome.instruction">Choose your language to begin.</p>

                    <div class="language-buttons">
                        <button class="lang-btn" onclick="selectLanguage('uz')">O'zbekcha</button>
                        <button class="lang-btn" onclick="selectLanguage('ru')">Русский</button>
                        <button class="lang-btn" onclick="selectLanguage('tr')">Türkçe</button>
                        <button class="lang-btn" onclick="selectLanguage('en')">English</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Menu Screen -->
        <div class="screen" id="menuScreen">
            <div class="screen-content">
                <h2 class="screen-title" data-i18n="menu.title">Admissions 2025–2026</h2>

                <div class="menu-sections">
                    <button class="menu-card primary" onclick="startCalculator()">
                        <div class="menu-card-title" data-i18n="menu.tuitionCalculator">Tuition Calculator</div>
                        <div class="menu-card-desc" data-i18n="menu.tuitionCalculatorDesc">Calculate tuition for your children</div>
                    </button>

                    <button class="menu-card collapsible" onclick="toggleSection('includedSection')">
                        <div class="menu-card-title" data-i18n="menu.whatIncluded">What is included in tuition</div>
                        <span class="expand-icon">+</span>
                    </button>
                    <div class="collapsible-content" id="includedSection">
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="info-title" data-i18n="included.academicProgramme">Academic programme</div>
                                <div class="info-desc" data-i18n="included.academicProgrammeDesc">Full-day learning programme with qualified international and local teachers</div>
                            </div>
                            <div class="info-item">
                                <div class="info-title" data-i18n="included.campusFacilities">Campus facilities</div>
                                <div class="info-desc" data-i18n="included.campusFacilitiesDesc">Access to modern classrooms, laboratories, libraries, and sports facilities</div>
                            </div>
                            <div class="info-item">
                                <div class="info-title" data-i18n="included.sportsActivities">Sports & activities</div>
                                <div class="info-desc" data-i18n="included.sportsActivitiesDesc">PE lessons, sports clubs, and extracurricular activities</div>
                            </div>
                            <div class="info-item">
                                <div class="info-title" data-i18n="included.meals">Meals</div>
                                <div class="info-desc" data-i18n="included.mealsDesc">Daily meals including breakfast, lunch, and snacks</div>
                            </div>
                            <div class="info-item">
                                <div class="info-title" data-i18n="included.pastoralCare">Pastoral care</div>
                                <div class="info-desc" data-i18n="included.pastoralCareDesc">Individual support and wellbeing programmes for every student</div>
                            </div>
                        </div>
                    </div>

                    <button class="menu-card collapsible" onclick="toggleSection('campusSection')">
                        <div class="menu-card-title" data-i18n="menu.campusesLocation">Campuses & location</div>
                        <span class="expand-icon">+</span>
                    </button>
                    <div class="collapsible-content" id="campusSection">
                        <div class="campus-block">
                            <img src="/images/campus-mu.jpg" alt="MU Campus" class="campus-image" onerror="this.src='/images/placeholder.svg'">
                            <h4 data-i18n="campusInfo.muTitle">Mirzo-Ulugbek Campus</h4>
                            <ul class="campus-features">
                                <li data-i18n="campusInfo.muFeature1">Convenient for families in central Tashkent</li>
                                <li data-i18n="campusInfo.muFeature2">Established campus with sports halls, labs, and theatre</li>
                                <li data-i18n="campusInfo.muFeature3">Russian & IB streams available</li>
                            </ul>
                        </div>
                        <div class="campus-block">
                            <img src="/images/campus-yash.jpg" alt="Yashnobod Campus" class="campus-image" onerror="this.src='/images/placeholder.svg'">
                            <h4 data-i18n="campusInfo.yashTitle">Yashnobod Campus</h4>
                            <ul class="campus-features">
                                <li data-i18n="campusInfo.yashFeature1">New large campus with modern facilities</li>
                                <li data-i18n="campusInfo.yashFeature2">Spacious territory with extensive outdoor areas</li>
                                <li data-i18n="campusInfo.yashFeature3">Russian & IB programmes, long-term development</li>
                            </ul>
                        </div>
                    </div>

                    <button class="menu-card collapsible" onclick="toggleSection('ibSection')">
                        <div class="menu-card-title" data-i18n="menu.whatIsIB">What is IB?</div>
                        <span class="expand-icon">+</span>
                    </button>
                    <div class="collapsible-content" id="ibSection">
                        <p data-i18n="ib.description">The International Baccalaureate is an internationally recognised programme used by schools worldwide.</p>
                        <div class="ib-features">
                            <div class="ib-item">
                                <div class="ib-title" data-i18n="ib.globalRecognition">Global recognition</div>
                                <div class="ib-desc" data-i18n="ib.globalRecognitionDesc">Accepted by universities across the world</div>
                            </div>
                            <div class="ib-item">
                                <div class="ib-title" data-i18n="ib.criticalThinking">Critical thinking</div>
                                <div class="ib-desc" data-i18n="ib.criticalThinkingDesc">Focus on inquiry-based learning and analytical skills</div>
                            </div>
                            <div class="ib-item">
                                <div class="ib-title" data-i18n="ib.universityPrep">University preparation</div>
                                <div class="ib-desc" data-i18n="ib.universityPrepDesc">Excellent foundation for international higher education</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calculator: Campus Selection -->
        <div class="screen" id="campusScreen">
            <div class="screen-content">
                <h2 class="screen-title" data-i18n="campus.selectPreference">Select campus preference</h2>

                <div class="campus-options">
                    <button class="campus-option-card" onclick="selectCampus('MU')">
                        <div class="campus-option-title" data-i18n="campus.muCampus">Mirzo-Ulugbek Campus</div>
                    </button>
                    <button class="campus-option-card" onclick="selectCampus('YASH')">
                        <div class="campus-option-title" data-i18n="campus.yashCampus">Yashnobod Campus</div>
                    </button>
                    <button class="campus-option-card" onclick="selectCampus('BOTH')">
                        <div class="campus-option-title" data-i18n="campus.showBoth">Show both campuses</div>
                    </button>
                </div>

                <button class="back-link" onclick="goToMenu()" data-i18n="campus.backToMenu">← Back to menu</button>
            </div>
        </div>

        <!-- Calculator: Children DOB -->
        <div class="screen" id="dobScreen">
            <div class="screen-content">
                <h2 class="screen-title" data-i18n="dob.title">Children applying for 2025–2026</h2>
                <p class="screen-subtitle" data-i18n="dob.subtitle">Enter date of birth for each child</p>

                <div id="childrenDobList" class="dob-list"></div>

                <button class="add-child-btn" onclick="addChildDob()" data-i18n="dob.addChild">+ Add another child</button>

                <button class="primary-btn" onclick="calculateTuition()" data-i18n="dob.calculate">Calculate tuition</button>

                <button class="back-link" onclick="goToCampusSelection()" data-i18n="dob.back">← Back</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div class="screen" id="resultsScreen">
            <div class="screen-content">
                <h2 class="screen-title" data-i18n="results.title">Available options for 2025–2026</h2>

                <div id="resultsContainer"></div>

                <!-- Sibling note -->
                <div class="sibling-note" id="siblingNote" style="display: none;">
                    <p data-i18n="results.siblingNote">For your family enrolling multiple children in 2025–2026, tuition will be calculated with family discounts where applicable. Our admissions team will prepare a personalised offer.</p>
                </div>

                <!-- Submit Form -->
                <div class="submit-section">
                    <h3 class="submit-title" data-i18n="submit.title">Request a detailed calculation and consultation</h3>

                    <div class="submit-form">
                        <div class="form-field">
                            <label data-i18n="submit.parentName">Parent name</label>
                            <input type="text" id="parentName" class="input-field" data-i18n="submit.parentNamePlaceholder" placeholder="Enter your full name">
                        </div>

                        <div class="form-field">
                            <label data-i18n="submit.phoneNumber">Phone number</label>
                            <input type="tel" id="parentPhone" class="input-field" data-i18n="submit.phonePlaceholder" placeholder="+998 XX XXX XX XX">
                        </div>

                        <div class="form-field">
                            <label data-i18n="submit.contactMethod">Preferred contact method</label>
                            <div class="radio-options">
                                <label class="radio-label">
                                    <input type="radio" name="contactMethod" value="telegram" checked>
                                    <span data-i18n="submit.telegram">Telegram</span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="contactMethod" value="call">
                                    <span data-i18n="submit.phoneCall">Phone call</span>
                                </label>
                            </div>
                        </div>

                        <div class="form-field">
                            <label class="checkbox-container">
                                <input type="checkbox" id="waitlistCheck">
                                <span data-i18n="submit.waitlist">Add younger child to waitlist for future years</span>
                            </label>
                        </div>

                        <button class="primary-btn" onclick="submitRequest()" data-i18n="submit.submit">Submit request to Admissions</button>
                    </div>
                </div>

                <button class="back-link" onclick="goToDobEntry()" data-i18n="results.modifyChildren">← Modify children</button>
            </div>
        </div>

        <!-- Thank You Screen -->
        <div class="screen" id="thankYouScreen">
            <div class="screen-content centered">
                <div class="thank-you-icon">✓</div>
                <h2 class="thank-you-title" data-i18n="thankYou.title">Thank you</h2>
                <p class="thank-you-text" data-i18n="thankYou.message1">Your request has been received by our Admissions team.</p>
                <p class="thank-you-text" data-i18n="thankYou.message2">They will contact you soon to provide a detailed calculation and answer your questions.</p>

                <button class="secondary-btn" onclick="tg.close()" data-i18n="thankYou.close">Close</button>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay" style="display: none;">
            <div class="spinner"></div>
        </div>
    </div>

    <script src="/js/translations.js"></script>
    <script src="/js/app.js"></script>
</body>
</html>
